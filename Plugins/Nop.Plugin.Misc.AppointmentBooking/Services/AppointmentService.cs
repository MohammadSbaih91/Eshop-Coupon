using Newtonsoft.Json;
using Nop.Core;
using Nop.Core.Data;
using Nop.Core.Domain.Messages;
using Nop.Plugin.Misc.AppointmentBooking.Domains;
using Nop.Plugin.Misc.AppointmentBooking.Models;
using Nop.Services.Common;
using Nop.Services.Events;
using Nop.Services.Localization;
using Nop.Services.Logging;
using Nop.Services.Messages;
using Nop.Services.Orders;
using Nop.Services.Stores;
using RestSharp;
using System;
using System.Collections.Generic;
using System.Globalization;
using System.Linq;
using System.Text;

namespace Nop.Plugin.Misc.AppointmentBooking.Services
{
    public class AppointmentService : IAppointmentService
    {
        #region Fields
        private readonly AppointmentBookingSettings _appointmentBookingSettings;
        private readonly IRepository<BookedAppointment> _bookedAppointmentRepository;
        private readonly IRepository<AppointmentBranch> _appointmentBranchRepository;
        private readonly ILogger _logger;
        private readonly IStoreService _storeService;
        private readonly IStoreContext _storeContext;
        private readonly ILanguageService _languageService;
        private readonly IMessageTemplateService _messageTemplateService;
        private readonly IEventPublisher _eventPublisher;
        private readonly ILocalizationService _localizationService;
        private readonly IEmailAccountService _emailAccountService;
        private readonly IOrderService _orderService;
        private readonly IWorkflowMessageService _workflowMessageService;
        private readonly EmailAccountSettings _emailAccountSettings;
        private readonly IAddressService _addressService;
        #endregion

        #region Ctor
        public AppointmentService(AppointmentBookingSettings appointmentBookingSettings,
            IRepository<BookedAppointment> bookedAppointmentRepository,
            IRepository<AppointmentBranch> appointmentBranchRepository,
            ILogger logger,
            IStoreService storeService,
            IStoreContext storeContext,
            ILanguageService languageService,
            IMessageTemplateService messageTemplateService,
            IEventPublisher eventPublisher,
            ILocalizationService localizationService,
            IEmailAccountService emailAccountService,
            IOrderService orderService,
            IWorkflowMessageService workflowMessageService,
            EmailAccountSettings emailAccountSettings,
            IAddressService addressService)
        {
            _appointmentBookingSettings = appointmentBookingSettings;
            _bookedAppointmentRepository = bookedAppointmentRepository;
            _appointmentBranchRepository = appointmentBranchRepository;
            _logger = logger;
            _storeService = storeService;
            _storeContext = storeContext;
            _languageService = languageService;
            _messageTemplateService = messageTemplateService;
            _eventPublisher = eventPublisher;
            _localizationService = localizationService;
            _emailAccountService = emailAccountService;
            _orderService = orderService;
            _workflowMessageService = workflowMessageService;
            _emailAccountSettings = emailAccountSettings;
            _addressService = addressService;
        }
        #endregion

        #region Utilities
        /// <summary>
        /// Ensure language is active
        /// </summary>
        /// <param name="languageId">Language identifier</param>
        /// <param name="storeId">Store identifier</param>
        /// <returns>Return a value language identifier</returns>
        protected virtual int EnsureLanguageIsActive(int languageId, int storeId)
        {
            //load language by specified ID
            var language = _languageService.GetLanguageById(languageId);

            if (language == null || !language.Published)
            {
                //load any language from the specified store
                language = _languageService.GetAllLanguages(storeId: storeId).FirstOrDefault();
            }

            if (language == null || !language.Published)
            {
                //load any language
                language = _languageService.GetAllLanguages().FirstOrDefault();
            }

            if (language == null)
                throw new Exception("No active language could be loaded");

            return language.Id;
        }

        /// <summary>
        /// Get active message templates by the name
        /// </summary>
        /// <param name="messageTemplateName">Message template name</param>
        /// <param name="storeId">Store identifier</param>
        /// <returns>List of message templates</returns>
        protected virtual IList<MessageTemplate> GetActiveMessageTemplates(string messageTemplateName, int storeId)
        {
            //get message templates by the name
            var messageTemplates = _messageTemplateService.GetMessageTemplatesByName(messageTemplateName, storeId);

            //no template found
            if (!messageTemplates?.Any() ?? true)
                return new List<MessageTemplate>();

            //filter active templates
            messageTemplates = messageTemplates.Where(messageTemplate => messageTemplate.IsActive).ToList();

            return messageTemplates;
        }

        /// <summary>
        /// Get EmailAccount to use with a message templates
        /// </summary>
        /// <param name="messageTemplate">Message template</param>
        /// <param name="languageId">Language identifier</param>
        /// <returns>EmailAccount</returns>
        protected virtual EmailAccount GetEmailAccountOfMessageTemplate(MessageTemplate messageTemplate, int languageId)
        {
            var emailAccountId = _localizationService.GetLocalized(messageTemplate, mt => mt.EmailAccountId, languageId);
            //some 0 validation (for localizable "Email account" dropdownlist which saves 0 if "Standard" value is chosen)
            if (emailAccountId == 0)
                emailAccountId = messageTemplate.EmailAccountId;

            var emailAccount = (_emailAccountService.GetEmailAccountById(emailAccountId) ?? _emailAccountService.GetEmailAccountById(_emailAccountSettings.DefaultEmailAccountId)) ??
                               _emailAccountService.GetAllEmailAccounts().FirstOrDefault();
            return emailAccount;
        }

        public virtual void AddAppointTokens(IList<Token> tokens, BookedAppointment bookedAppointment)
        {
            DateTime appDate = DateTime.ParseExact(bookedAppointment.AppointmentDay, "dd/MM/yyyy", CultureInfo.InvariantCulture);
            var dt = appDate.ToString("dddd, dd MMMM yyyy");

            tokens.Add(new Token("Store.Id", bookedAppointment.OrderId));
            tokens.Add(new Token("Store.TicketNumber", bookedAppointment.TicketNumber));
            tokens.Add(new Token("Store.AppointmentDate", dt));
            tokens.Add(new Token("Store.AppointmentTime", bookedAppointment.AppointmentTime));
        }
        #endregion

        public BranchList GetBranchAroundMe(string currentLatitude, string currentLongitude, string language)
        {
            var branchesResult = new BranchList();
            try
            {
                //var client = new RestClient("http://10.1.167.110:8484/customerVisit/v1/getBranchesAroundMe?CurrentLatitude=31.965183999999997&CurrentLongitude=35.9038976&language=EN");
                var client = new RestClient($"{_appointmentBookingSettings.APIUrl}/getBranchesAroundMe?CurrentLatitude={currentLatitude}&CurrentLongitude={currentLongitude}&language={language}");
                client.Timeout = -1;
                var request = new RestRequest(Method.GET);
                IRestResponse response = client.Execute(request);
                if (response.IsSuccessful)
                {
                    branchesResult = BranchList.FromJson(response.Content);
                }

                //var branches = "{\r\n    \"getBranchesResult\": {\r\n        \"code\": 0.0,\r\n        \"description\": null\r\n    },\r\n    \"branches\": [\r\n        {\r\n            \"id\": 1365.0,\r\n            \"distance\": 151.2,\r\n            \"cityID\": 1648.0,\r\n            \"departmentID\": 1.0,\r\n            \"identity\": \"qs-007\",\r\n            \"isWorkingNow\": true,\r\n            \"latitude\": 31.964272,\r\n            \"longitude\": 35.905087,\r\n            \"todayWorkingShifts\": [\r\n                {\r\n                    \"from\": \"09:00\",\r\n                    \"to\": \"20:00\"\r\n                }\r\n            ],\r\n            \"name\": \"Boulevard shop\"\r\n        },\r\n        {\r\n            \"id\": 561.0,\r\n            \"distance\": 729.46,\r\n            \"cityID\": 1648.0,\r\n            \"departmentID\": 1.0,\r\n            \"identity\": \"67\",\r\n            \"isWorkingNow\": true,\r\n            \"latitude\": 31.969954,\r\n            \"longitude\": 35.909203,\r\n            \"todayWorkingShifts\": [\r\n                {\r\n                    \"from\": \"08:00\",\r\n                    \"to\": \"17:00\"\r\n                }\r\n            ],\r\n            \"name\": \"Franchise Abdali\"\r\n        },\r\n        {\r\n            \"id\": 592.0,\r\n            \"distance\": 1130.58,\r\n            \"cityID\": 1647.0,\r\n            \"departmentID\": 1.0,\r\n            \"identity\": \"128\",\r\n            \"isWorkingNow\": true,\r\n            \"latitude\": 31.969532,\r\n            \"longitude\": 35.91473,\r\n            \"todayWorkingShifts\": [\r\n                {\r\n                    \"from\": \"09:00\",\r\n                    \"to\": \"21:00\"\r\n                }\r\n            ],\r\n            \"name\": \"Franchise - Jabal Alhussein\"\r\n        },\r\n        {\r\n            \"id\": 1509.0,\r\n            \"distance\": 2055.0,\r\n            \"cityID\": 1648.0,\r\n            \"departmentID\": 1.0,\r\n            \"identity\": \"Safeway-128\",\r\n            \"isWorkingNow\": true,\r\n            \"latitude\": 31.981894,\r\n            \"longitude\": 35.89459,\r\n            \"todayWorkingShifts\": [\r\n                {\r\n                    \"from\": \"10:00\",\r\n                    \"to\": \"22:00\"\r\n                }\r\n            ],\r\n            \"name\": \"Franchise - Safeway Shmaisani\"\r\n        },\r\n        {\r\n            \"id\": 1485.0,\r\n            \"distance\": 2262.75,\r\n            \"cityID\": 1647.0,\r\n            \"departmentID\": 1.0,\r\n            \"identity\": \"QS-0128\",\r\n            \"isWorkingNow\": true,\r\n            \"latitude\": 31.97842,\r\n            \"longitude\": 35.922115,\r\n            \"todayWorkingShifts\": [\r\n                {\r\n                    \"from\": \"10:00\",\r\n                    \"to\": \"22:00\"\r\n                }\r\n            ],\r\n            \"name\": \"Franchise - Istqlal Mall\"\r\n        },\r\n        {\r\n            \"id\": 466.0,\r\n            \"distance\": 2809.95,\r\n            \"cityID\": 1647.0,\r\n            \"departmentID\": 1.0,\r\n            \"identity\": \"002\",\r\n            \"isWorkingNow\": true,\r\n            \"latitude\": 31.952814,\r\n            \"longitude\": 35.92987,\r\n            \"todayWorkingShifts\": [\r\n                {\r\n                    \"from\": \"09:00\",\r\n                    \"to\": \"19:00\"\r\n                }\r\n            ],\r\n            \"name\": \"Franchise Al Khayyam\"\r\n        },\r\n        {\r\n            \"id\": 1246.0,\r\n            \"distance\": 3043.55,\r\n            \"cityID\": 1648.0,\r\n            \"departmentID\": 1.0,\r\n            \"identity\": \"BR-16\",\r\n            \"isWorkingNow\": true,\r\n            \"latitude\": 31.990734,\r\n            \"longitude\": 35.892323,\r\n            \"todayWorkingShifts\": [\r\n                {\r\n                    \"from\": \"14:00\",\r\n                    \"to\": \"21:59\"\r\n                }\r\n            ],\r\n            \"name\": \"Franchise Smartbuy University street\"\r\n        },\r\n        {\r\n            \"id\": 1525.0,\r\n            \"distance\": 3065.7,\r\n            \"cityID\": 1648.0,\r\n            \"departmentID\": 1.0,\r\n            \"identity\": \"164\",\r\n            \"isWorkingNow\": true,\r\n            \"latitude\": 31.941141,\r\n            \"longitude\": 35.88799,\r\n            \"todayWorkingShifts\": [\r\n                {\r\n                    \"from\": \"10:00\",\r\n                    \"to\": \"22:00\"\r\n                }\r\n            ],\r\n            \"name\": \"Franchise Smartbuy Taj Mall\"\r\n        },\r\n        {\r\n            \"id\": 1262.0,\r\n            \"distance\": 3334.35,\r\n            \"cityID\": 1648.0,\r\n            \"departmentID\": 1.0,\r\n            \"identity\": \"qs-076\",\r\n            \"isWorkingNow\": true,\r\n            \"latitude\": 31.941502,\r\n            \"longitude\": 35.882214,\r\n            \"todayWorkingShifts\": [\r\n                {\r\n                    \"from\": \"10:00\",\r\n                    \"to\": \"20:00\"\r\n                }\r\n            ],\r\n            \"name\": \"Flagship Shop\"\r\n        },\r\n        {\r\n            \"id\": 1144.0,\r\n            \"distance\": 3492.35,\r\n            \"cityID\": 1648.0,\r\n            \"departmentID\": 1.0,\r\n            \"identity\": \"QS-1\",\r\n            \"isWorkingNow\": false,\r\n            \"latitude\": 31.9782,\r\n            \"longitude\": 35.8702,\r\n            \"todayWorkingShifts\": [\r\n                {\r\n                    \"from\": \"08:00\",\r\n                    \"to\": \"16:00\"\r\n                }\r\n            ],\r\n            \"name\": \"Tla' Al-Ali Center\"\r\n        },\r\n        {\r\n            \"id\": 702.0,\r\n            \"distance\": 3719.9,\r\n            \"cityID\": 1647.0,\r\n            \"departmentID\": 1.0,\r\n            \"identity\": \"QS-07\",\r\n            \"isWorkingNow\": true,\r\n            \"latitude\": 31.932714,\r\n            \"longitude\": 35.9134,\r\n            \"todayWorkingShifts\": [\r\n                {\r\n                    \"from\": \"08:00\",\r\n                    \"to\": \"17:00\"\r\n                }\r\n            ],\r\n            \"name\": \"Franchise Nazal Shop\"\r\n        },\r\n        {\r\n            \"id\": 584.0,\r\n            \"distance\": 3748.84,\r\n            \"cityID\": 1648.0,\r\n            \"departmentID\": 1.0,\r\n            \"identity\": \"007\",\r\n            \"isWorkingNow\": true,\r\n            \"latitude\": 31.9886,\r\n            \"longitude\": 35.8753,\r\n            \"todayWorkingShifts\": [\r\n                {\r\n                    \"from\": \"09:00\",\r\n                    \"to\": \"17:00\"\r\n                }\r\n            ],\r\n            \"name\": \"Integrated Gardens\"\r\n        },\r\n        {\r\n            \"id\": 512.0,\r\n            \"distance\": 4301.43,\r\n            \"cityID\": 1647.0,\r\n            \"departmentID\": 1.0,\r\n            \"identity\": \"1\",\r\n            \"isWorkingNow\": true,\r\n            \"latitude\": 31.9397,\r\n            \"longitude\": 35.9382,\r\n            \"todayWorkingShifts\": [\r\n                {\r\n                    \"from\": \"08:00\",\r\n                    \"to\": \"17:00\"\r\n                }\r\n            ],\r\n            \"name\": \"Al-Ashrafieh Center\"\r\n        },\r\n        {\r\n            \"id\": 1216.0,\r\n            \"distance\": 4463.84,\r\n            \"cityID\": 1648.0,\r\n            \"departmentID\": 1.0,\r\n            \"identity\": \"BR-128\",\r\n            \"isWorkingNow\": true,\r\n            \"latitude\": 31.95777,\r\n            \"longitude\": 35.85739,\r\n            \"todayWorkingShifts\": [\r\n                {\r\n                    \"from\": \"10:00\",\r\n                    \"to\": \"22:00\"\r\n                }\r\n            ],\r\n            \"name\": \"Franchise - Safeway 7Th Circle\"\r\n        },\r\n        {\r\n            \"id\": 834.0,\r\n            \"distance\": 4566.2,\r\n            \"cityID\": 1648.0,\r\n            \"departmentID\": 1.0,\r\n            \"identity\": \"004\",\r\n            \"isWorkingNow\": true,\r\n            \"latitude\": 31.9557,\r\n            \"longitude\": 35.8568,\r\n            \"todayWorkingShifts\": [\r\n                {\r\n                    \"from\": \"08:00\",\r\n                    \"to\": \"17:00\"\r\n                }\r\n            ],\r\n            \"name\": \"Sweifieh Center\"\r\n        },\r\n        {\r\n            \"id\": 1504.0,\r\n            \"distance\": 4566.56,\r\n            \"cityID\": 1648.0,\r\n            \"departmentID\": 1.0,\r\n            \"identity\": \"BR-Morjan\",\r\n            \"isWorkingNow\": true,\r\n            \"latitude\": 31.996857,\r\n            \"longitude\": 35.873074,\r\n            \"todayWorkingShifts\": [\r\n                {\r\n                    \"from\": \"10:00\",\r\n                    \"to\": \"21:59\"\r\n                }\r\n            ],\r\n            \"name\": \"Franchise Murjan Mall\"\r\n        },\r\n        {\r\n            \"id\": 1325.0,\r\n            \"distance\": 4826.09,\r\n            \"cityID\": 1648.0,\r\n            \"departmentID\": 1.0,\r\n            \"identity\": \"BR-10\",\r\n            \"isWorkingNow\": true,\r\n            \"latitude\": 31.951715,\r\n            \"longitude\": 35.855263,\r\n            \"todayWorkingShifts\": [\r\n                {\r\n                    \"from\": \"10:00\",\r\n                    \"to\": \"22:00\"\r\n                }\r\n            ],\r\n            \"name\": \"Franchise Smartbuy 7th circle\"\r\n        },\r\n        {\r\n            \"id\": 797.0,\r\n            \"distance\": 4954.63,\r\n            \"cityID\": 1647.0,\r\n            \"departmentID\": 1.0,\r\n            \"identity\": \"qs-0136\",\r\n            \"isWorkingNow\": true,\r\n            \"latitude\": 31.97608,\r\n            \"longitude\": 35.95483,\r\n            \"todayWorkingShifts\": [\r\n                {\r\n                    \"from\": \"08:59\",\r\n                    \"to\": \"18:00\"\r\n                }\r\n            ],\r\n            \"name\": \"Franchise \u2013 Hashmi Shamali\"\r\n        }\r\n    ]\r\n}";
                //branchesResult = BranchList.FromJson(branches);
            }
            catch (Exception ex)
            {
                _logger.Error("GetBranchAroundMe error", ex);
            }
            return branchesResult;
        }

        public BranchDetail GetBranchDetail(string language)
        {
            var branchDetail = new BranchDetail();
            try
            {
                //var client = new RestClient("http://10.1.167.110:8484/customerVisit/v1/getBranchesDetails?language=EN");
                var client = new RestClient($"{_appointmentBookingSettings.APIUrl}/getBranchesDetails?language={language}");
                client.Timeout = -1;
                var request = new RestRequest(Method.GET);
                IRestResponse response = client.Execute(request);

                if (response.IsSuccessful)
                {
                    branchDetail = BranchDetail.FromJson(response.Content);
                }

                //var detail = "{\r\n    \"citiesMap\": {\r\n        \"1647.0\": {\r\n            \"id\": 1647.0,\r\n            \"regionID\": 1618.0,\r\n            \"name\": \"East Amman\"\r\n        },\r\n        \"1655.0\": {\r\n            \"id\": 1655.0,\r\n            \"regionID\": 1620.0,\r\n            \"name\": \"Ajloun\"\r\n        },\r\n        \"1654.0\": {\r\n            \"id\": 1654.0,\r\n            \"regionID\": 1619.0,\r\n            \"name\": \"Ma'an\"\r\n        },\r\n        \"1653.0\": {\r\n            \"id\": 1653.0,\r\n            \"regionID\": 1619.0,\r\n            \"name\": \"Aqaba\"\r\n        },\r\n        \"1648.0\": {\r\n            \"id\": 1648.0,\r\n            \"regionID\": 1617.0,\r\n            \"name\": \"West Amman\"\r\n        },\r\n        \"1663.0\": {\r\n            \"id\": 1663.0,\r\n            \"regionID\": 1620.0,\r\n            \"name\": \"Irbid\"\r\n        },\r\n        \"1662.0\": {\r\n            \"id\": 1662.0,\r\n            \"regionID\": 1619.0,\r\n            \"name\": \"Karak\"\r\n        },\r\n        \"1661.0\": {\r\n            \"id\": 1661.0,\r\n            \"regionID\": 1619.0,\r\n            \"name\": \"Altafeeleh\"\r\n        },\r\n        \"1660.0\": {\r\n            \"id\": 1660.0,\r\n            \"regionID\": 1618.0,\r\n            \"name\": \"Zarqa\"\r\n        },\r\n        \"1658.0\": {\r\n            \"id\": 1658.0,\r\n            \"regionID\": 1617.0,\r\n            \"name\": \"Madaba\"\r\n        },\r\n        \"1657.0\": {\r\n            \"id\": 1657.0,\r\n            \"regionID\": 1617.0,\r\n            \"name\": \"AlSalt\"\r\n        },\r\n        \"1656.0\": {\r\n            \"id\": 1656.0,\r\n            \"regionID\": 1620.0,\r\n            \"name\": \"Jarash\"\r\n        },\r\n        \"1665.0\": {\r\n            \"id\": 1665.0,\r\n            \"regionID\": 1620.0,\r\n            \"name\": \"AL Ramthah\"\r\n        },\r\n        \"1664.0\": {\r\n            \"id\": 1664.0,\r\n            \"regionID\": 1618.0,\r\n            \"name\": \"Mafraq\"\r\n        }\r\n    },\r\n    \"branchesMap\": {\r\n        \"1647.0\": [\r\n            {\r\n                \"id\": 512.0,\r\n                \"distance\": 5181555.0,\r\n                \"cityID\": 1647.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"1\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.9397,\r\n                \"longitude\": 35.9382,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"17:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Al-Ashrafieh Center\"\r\n            },\r\n            {\r\n                \"id\": 363.0,\r\n                \"distance\": 5176249.5,\r\n                \"cityID\": 1647.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"137\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.915707,\r\n                \"longitude\": 35.889233,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:59\",\r\n                        \"to\": \"18:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise - Dahyet AL-Yasmin\"\r\n            },\r\n            {\r\n                \"id\": 797.0,\r\n                \"distance\": 5185207.0,\r\n                \"cityID\": 1647.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"qs-0136\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.97608,\r\n                \"longitude\": 35.95483,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:59\",\r\n                        \"to\": \"18:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise \u2013 Hashmi Shamali\"\r\n            },\r\n            {\r\n                \"id\": 1485.0,\r\n                \"distance\": 5182869.0,\r\n                \"cityID\": 1647.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"QS-0128\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.97842,\r\n                \"longitude\": 35.922115,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"10:00\",\r\n                        \"to\": \"22:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise - Istqlal Mall\"\r\n            },\r\n            {\r\n                \"id\": 592.0,\r\n                \"distance\": 5181723.5,\r\n                \"cityID\": 1647.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"128\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.969532,\r\n                \"longitude\": 35.91473,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"09:00\",\r\n                        \"to\": \"21:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise - Jabal Alhussein\"\r\n            },\r\n            {\r\n                \"id\": 658.0,\r\n                \"distance\": 5185494.0,\r\n                \"cityID\": 1647.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"QS-0132\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.003284,\r\n                \"longitude\": 35.93516,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"10:00\",\r\n                        \"to\": \"16:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise - Tabarbour\"\r\n            },\r\n            {\r\n                \"id\": 1211.0,\r\n                \"distance\": 5181363.0,\r\n                \"cityID\": 1647.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"A137\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.905355,\r\n                \"longitude\": 35.965183,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"11:00\",\r\n                        \"to\": \"20:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise Abu Alanda\"\r\n            },\r\n            {\r\n                \"id\": 466.0,\r\n                \"distance\": 5181780.0,\r\n                \"cityID\": 1647.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"002\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.952814,\r\n                \"longitude\": 35.92987,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"09:00\",\r\n                        \"to\": \"19:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise Al Khayyam\"\r\n            },\r\n            {\r\n                \"id\": 445.0,\r\n                \"distance\": 5188094.5,\r\n                \"cityID\": 1647.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"M132\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.981735,\r\n                \"longitude\": 35.987865,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"09:00\",\r\n                        \"to\": \"17:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise Marka\"\r\n            },\r\n            {\r\n                \"id\": 702.0,\r\n                \"distance\": 5179207.0,\r\n                \"cityID\": 1647.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"QS-07\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.932714,\r\n                \"longitude\": 35.9134,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"17:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise Nazal Shop\"\r\n            },\r\n            {\r\n                \"id\": 532.0,\r\n                \"distance\": 5182248.5,\r\n                \"cityID\": 1647.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"005\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.873468,\r\n                \"longitude\": 36.004105,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"17:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise Sahab Shop\"\r\n            },\r\n            {\r\n                \"id\": 477.0,\r\n                \"distance\": 5180635.0,\r\n                \"cityID\": 1647.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"12\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.92642,\r\n                \"longitude\": 35.937546,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"17:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise-Wahdat\"\r\n            },\r\n            {\r\n                \"id\": 425.0,\r\n                \"distance\": 5188657.0,\r\n                \"cityID\": 1647.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"7\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.9833,\r\n                \"longitude\": 35.9939,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"17:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Jabal Al-Naser\"\r\n            },\r\n            {\r\n                \"id\": 724.0,\r\n                \"distance\": 5184841.5,\r\n                \"cityID\": 1647.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"16\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.0483,\r\n                \"longitude\": 35.8877,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"17:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Shafa Badran Shop\"\r\n            }\r\n        ],\r\n        \"1654.0\": [\r\n            {\r\n                \"id\": 1429.0,\r\n                \"distance\": 5053271.5,\r\n                \"cityID\": 1654.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"160\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 30.1982,\r\n                \"longitude\": 35.7354,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"17:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Ma'an SHOP\"\r\n            },\r\n            {\r\n                \"id\": 1417.0,\r\n                \"distance\": 5041134.0,\r\n                \"cityID\": 1654.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"163\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 30.3214,\r\n                \"longitude\": 35.4805,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"09:00\",\r\n                        \"to\": \"15:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Wadi Mousa /Petra Shop\"\r\n            }\r\n        ],\r\n        \"1653.0\": [\r\n            {\r\n                \"id\": 1447.0,\r\n                \"distance\": 4952633.0,\r\n                \"cityID\": 1653.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"A150\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 29.5268,\r\n                \"longitude\": 35.0036,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"18:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Aqaba Center\"\r\n            }\r\n        ],\r\n        \"1655.0\": [\r\n            {\r\n                \"id\": 1345.0,\r\n                \"distance\": 5192952.5,\r\n                \"cityID\": 1655.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"110\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.328,\r\n                \"longitude\": 35.7509,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"16:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Ajloun \"\r\n            }\r\n        ],\r\n        \"1648.0\": [\r\n            {\r\n                \"id\": 1583.0,\r\n                \"distance\": 5170962.0,\r\n                \"cityID\": 1648.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"17\",\r\n                \"isWorkingNow\": true,\r\n                \"latitude\": 31.72243,\r\n                \"longitude\": 35.985474,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"00:00\",\r\n                        \"to\": \"23:59\"\r\n                    }\r\n                ],\r\n                \"name\": \"airport terminal 1\"\r\n            },\r\n            {\r\n                \"id\": 1365.0,\r\n                \"distance\": 5180644.0,\r\n                \"cityID\": 1648.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"qs-007\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.964272,\r\n                \"longitude\": 35.905087,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"09:00\",\r\n                        \"to\": \"20:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Boulevard shop\"\r\n            },\r\n            {\r\n                \"id\": 744.0,\r\n                \"distance\": 5181863.0,\r\n                \"cityID\": 1648.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"003\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.0633,\r\n                \"longitude\": 35.8355,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"15:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Ein elbasha\"\r\n            },\r\n            {\r\n                \"id\": 1262.0,\r\n                \"distance\": 5177407.5,\r\n                \"cityID\": 1648.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"qs-076\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.941502,\r\n                \"longitude\": 35.882214,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"10:00\",\r\n                        \"to\": \"20:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Flagship Shop\"\r\n            },\r\n            {\r\n                \"id\": 1216.0,\r\n                \"distance\": 5176586.0,\r\n                \"cityID\": 1648.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"BR-128\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.95777,\r\n                \"longitude\": 35.85739,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"10:00\",\r\n                        \"to\": \"22:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise - Safeway 7Th Circle\"\r\n            },\r\n            {\r\n                \"id\": 1509.0,\r\n                \"distance\": 5181001.5,\r\n                \"cityID\": 1648.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"Safeway-128\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.981894,\r\n                \"longitude\": 35.89459,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"10:00\",\r\n                        \"to\": \"22:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise - Safeway Shmaisani\"\r\n            },\r\n            {\r\n                \"id\": 561.0,\r\n                \"distance\": 5181330.5,\r\n                \"cityID\": 1648.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"67\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.969954,\r\n                \"longitude\": 35.909203,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"17:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise Abdali\"\r\n            },\r\n            {\r\n                \"id\": 906.0,\r\n                \"distance\": 5175118.5,\r\n                \"cityID\": 1648.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"QS-132\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.954699,\r\n                \"longitude\": 35.84076,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:59\",\r\n                        \"to\": \"18:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise Bayader Shop\"\r\n            },\r\n            {\r\n                \"id\": 888.0,\r\n                \"distance\": 5173400.5,\r\n                \"cityID\": 1648.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"6\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.0018,\r\n                \"longitude\": 35.7774,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"17:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise Fuhais\"\r\n            },\r\n            {\r\n                \"id\": 1504.0,\r\n                \"distance\": 5180347.5,\r\n                \"cityID\": 1648.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"BR-Morjan\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.996857,\r\n                \"longitude\": 35.873074,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"10:00\",\r\n                        \"to\": \"21:59\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise Murjan Mall\"\r\n            },\r\n            {\r\n                \"id\": 758.0,\r\n                \"distance\": 5181836.0,\r\n                \"cityID\": 1648.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"P137\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.021633,\r\n                \"longitude\": 35.871227,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"09:00\",\r\n                        \"to\": \"21:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise Panorama Mall\"\r\n            },\r\n            {\r\n                \"id\": 1325.0,\r\n                \"distance\": 5176026.5,\r\n                \"cityID\": 1648.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"BR-10\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.951715,\r\n                \"longitude\": 35.855263,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"10:00\",\r\n                        \"to\": \"22:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise Smartbuy 7th circle\"\r\n            },\r\n            {\r\n                \"id\": 1525.0,\r\n                \"distance\": 5177824.0,\r\n                \"cityID\": 1648.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"164\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.941141,\r\n                \"longitude\": 35.88799,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"10:00\",\r\n                        \"to\": \"22:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise Smartbuy Taj Mall\"\r\n            },\r\n            {\r\n                \"id\": 1246.0,\r\n                \"distance\": 5181410.0,\r\n                \"cityID\": 1648.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"BR-16\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.990734,\r\n                \"longitude\": 35.892323,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"14:00\",\r\n                        \"to\": \"21:59\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise Smartbuy University street\"\r\n            },\r\n            {\r\n                \"id\": 785.0,\r\n                \"distance\": 5180242.5,\r\n                \"cityID\": 1648.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"001\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.0231,\r\n                \"longitude\": 35.849,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"17:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise Sweileh\"\r\n            },\r\n            {\r\n                \"id\": 1174.0,\r\n                \"distance\": 5176577.5,\r\n                \"cityID\": 1648.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"QS-M132\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.98042,\r\n                \"longitude\": 35.83771,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"10:00\",\r\n                        \"to\": \"23:59\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise-City Mall\"\r\n            },\r\n            {\r\n                \"id\": 677.0,\r\n                \"distance\": 5171607.0,\r\n                \"cityID\": 1648.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"QS-02\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.88796,\r\n                \"longitude\": 35.8522,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"18:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise-Marj Alhamam\"\r\n            },\r\n            {\r\n                \"id\": 584.0,\r\n                \"distance\": 5179974.5,\r\n                \"cityID\": 1648.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"007\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.9886,\r\n                \"longitude\": 35.8753,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"09:00\",\r\n                        \"to\": \"17:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Integrated Gardens\"\r\n            },\r\n            {\r\n                \"id\": 1291.0,\r\n                \"distance\": 5176780.5,\r\n                \"cityID\": 1648.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"M6\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.9767,\r\n                \"longitude\": 35.8436,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"10:00\",\r\n                        \"to\": \"23:59\"\r\n                    }\r\n                ],\r\n                \"name\": \"Mecca Mall\"\r\n            },\r\n            {\r\n                \"id\": 834.0,\r\n                \"distance\": 5176405.0,\r\n                \"cityID\": 1648.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"004\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.9557,\r\n                \"longitude\": 35.8568,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"17:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Sweifieh Center\"\r\n            },\r\n            {\r\n                \"id\": 1144.0,\r\n                \"distance\": 5178903.0,\r\n                \"cityID\": 1648.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"QS-1\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.9782,\r\n                \"longitude\": 35.8702,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"16:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Tla' Al-Ali Center\"\r\n            }\r\n        ],\r\n        \"1661.0\": [\r\n            {\r\n                \"id\": 280.0,\r\n                \"distance\": 5083932.5,\r\n                \"cityID\": 1661.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"157\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 30.8352,\r\n                \"longitude\": 35.6044,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"17:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Tafeileh Shop\"\r\n            }\r\n        ],\r\n        \"1658.0\": [\r\n            {\r\n                \"id\": 634.0,\r\n                \"distance\": 5155721.0,\r\n                \"cityID\": 1658.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"50\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.7162,\r\n                \"longitude\": 35.7916,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"16:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Madaba Shop\"\r\n            }\r\n        ],\r\n        \"1656.0\": [\r\n            {\r\n                \"id\": 982.0,\r\n                \"distance\": 5200755.5,\r\n                \"cityID\": 1656.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"107\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.2812,\r\n                \"longitude\": 35.8952,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"16:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Jarash Shop\"\r\n            }\r\n        ],\r\n        \"1662.0\": [\r\n            {\r\n                \"id\": 1127.0,\r\n                \"distance\": 5125530.5,\r\n                \"cityID\": 1662.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"155\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.3105,\r\n                \"longitude\": 35.7434,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"17:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise ALQaser\"\r\n            },\r\n            {\r\n                \"id\": 1107.0,\r\n                \"distance\": 5115391.0,\r\n                \"cityID\": 1662.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"T136\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.17075,\r\n                \"longitude\": 35.729733,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"18:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise Thaneiet Alkarak\"\r\n            },\r\n            {\r\n                \"id\": 263.0,\r\n                \"distance\": 5114479.5,\r\n                \"cityID\": 1662.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"150\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.184465,\r\n                \"longitude\": 35.706387,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"17:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Karak Shop\"\r\n            },\r\n            {\r\n                \"id\": 1398.0,\r\n                \"distance\": 5106925.0,\r\n                \"cityID\": 1662.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"159\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 31.083467,\r\n                \"longitude\": 35.693497,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"17:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Motah Shop-karak\"\r\n            }\r\n        ],\r\n        \"1660.0\": [\r\n            {\r\n                \"id\": 407.0,\r\n                \"distance\": 5194848.0,\r\n                \"cityID\": 1660.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"136\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.028027,\r\n                \"longitude\": 36.03671,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"09:00\",\r\n                        \"to\": \"17:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise \u2013 AlJabal Alshamali\"\r\n            },\r\n            {\r\n                \"id\": 303.0,\r\n                \"distance\": 5202414.5,\r\n                \"cityID\": 1660.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"132\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.085754,\r\n                \"longitude\": 36.08642,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:59\",\r\n                        \"to\": \"18:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise - New Zarqa\"\r\n            },\r\n            {\r\n                \"id\": 387.0,\r\n                \"distance\": 5192771.5,\r\n                \"cityID\": 1660.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"55\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.0104,\r\n                \"longitude\": 36.0246,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"17:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise Russifeh\"\r\n            },\r\n            {\r\n                \"id\": 315.0,\r\n                \"distance\": 5201154.0,\r\n                \"cityID\": 1660.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"52\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.0635,\r\n                \"longitude\": 36.089,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"09:00\",\r\n                        \"to\": \"17:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Zarqa King Hussien Street\"\r\n            }\r\n        ],\r\n        \"1657.0\": [\r\n            {\r\n                \"id\": 953.0,\r\n                \"distance\": 5174019.0,\r\n                \"cityID\": 1657.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"58\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.1892,\r\n                \"longitude\": 35.622,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"15:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Dear Ala'a Shop\"\r\n            },\r\n            {\r\n                \"id\": 915.0,\r\n                \"distance\": 5172004.5,\r\n                \"cityID\": 1657.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"S50\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.0367,\r\n                \"longitude\": 35.7287,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"16:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Salt Shop\"\r\n            }\r\n        ],\r\n        \"1663.0\": [\r\n            {\r\n                \"id\": 229.0,\r\n                \"distance\": 5199348.5,\r\n                \"cityID\": 1663.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"106\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.5,\r\n                \"longitude\": 35.684,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"16:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Al - Kora\"\r\n            },\r\n            {\r\n                \"id\": 239.0,\r\n                \"distance\": 5220225.5,\r\n                \"cityID\": 1663.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"QS-120\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.6392,\r\n                \"longitude\": 35.8387,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"16:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Bani Kenaneh Shop\"\r\n            },\r\n            {\r\n                \"id\": 1067.0,\r\n                \"distance\": 5215384.5,\r\n                \"cityID\": 1663.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"10\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.535957,\r\n                \"longitude\": 35.865585,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"10:00\",\r\n                        \"to\": \"23:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise - Irbid City Center\"\r\n            },\r\n            {\r\n                \"id\": 1629.0,\r\n                \"distance\": 5216329.0,\r\n                \"cityID\": 1663.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"30-st\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.553642,\r\n                \"longitude\": 35.86253,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"09:00\",\r\n                        \"to\": \"21:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Franchise Irbid 30th Street\"\r\n            },\r\n            {\r\n                \"id\": 1031.0,\r\n                \"distance\": 5215568.0,\r\n                \"cityID\": 1663.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"100\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.5541,\r\n                \"longitude\": 35.852,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"16:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Irbid Center\"\r\n            },\r\n            {\r\n                \"id\": 1005.0,\r\n                \"distance\": 5214572.5,\r\n                \"cityID\": 1663.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"113\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.5399,\r\n                \"longitude\": 35.8513,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"09:00\",\r\n                        \"to\": \"16:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Irbid University Street\"\r\n            },\r\n            {\r\n                \"id\": 958.0,\r\n                \"distance\": 5200983.0,\r\n                \"cityID\": 1663.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"105\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.6102,\r\n                \"longitude\": 35.6077,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"09:00\",\r\n                        \"to\": \"16:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"N-alshounah\"\r\n            }\r\n        ],\r\n        \"1665.0\": [\r\n            {\r\n                \"id\": 1090.0,\r\n                \"distance\": 5228335.5,\r\n                \"cityID\": 1665.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"114\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.5634,\r\n                \"longitude\": 36.0135,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"16:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Al-Ramtha Shop\"\r\n            }\r\n        ],\r\n        \"1664.0\": [\r\n            {\r\n                \"id\": 201.0,\r\n                \"distance\": 5227974.5,\r\n                \"cityID\": 1664.0,\r\n                \"departmentID\": 1.0,\r\n                \"identity\": \"111\",\r\n                \"isWorkingNow\": false,\r\n                \"latitude\": 32.3417,\r\n                \"longitude\": 36.202,\r\n                \"todayWorkingShifts\": [\r\n                    {\r\n                        \"from\": \"08:00\",\r\n                        \"to\": \"16:00\"\r\n                    }\r\n                ],\r\n                \"name\": \"Al Mafraq Shop\"\r\n            }\r\n        ]\r\n    },\r\n    \"servicesMap\": {\r\n        \"1031.0\": [],\r\n        \"512.0\": [],\r\n        \"263.0\": [\r\n            {\r\n                \"id\": 180.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"After Sales Services\"\r\n            },\r\n            {\r\n                \"id\": 178.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Busniss & SME\"\r\n            },\r\n            {\r\n                \"id\": 176.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Devices Sales\"\r\n            },\r\n            {\r\n                \"id\": 179.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Payment\"\r\n            },\r\n            {\r\n                \"id\": 1609.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Refill\"\r\n            },\r\n            {\r\n                \"id\": 174.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Internet Sales\"\r\n            },\r\n            {\r\n                \"id\": 175.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Mobile Sales\"\r\n            },\r\n            {\r\n                \"id\": 177.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Orange Money\"\r\n            },\r\n            {\r\n                \"id\": 181.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Others\"\r\n            }\r\n        ],\r\n        \"532.0\": [],\r\n        \"1067.0\": [],\r\n        \"1090.0\": [],\r\n        \"1107.0\": [\r\n            {\r\n                \"id\": 180.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"After Sales Services\"\r\n            },\r\n            {\r\n                \"id\": 178.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Busniss & SME\"\r\n            },\r\n            {\r\n                \"id\": 176.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Devices Sales\"\r\n            },\r\n            {\r\n                \"id\": 179.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Payment\"\r\n            },\r\n            {\r\n                \"id\": 1609.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Refill\"\r\n            },\r\n            {\r\n                \"id\": 174.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Internet Sales\"\r\n            },\r\n            {\r\n                \"id\": 175.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Mobile Sales\"\r\n            },\r\n            {\r\n                \"id\": 177.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Orange Money\"\r\n            },\r\n            {\r\n                \"id\": 181.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Others\"\r\n            }\r\n        ],\r\n        \"280.0\": [\r\n            {\r\n                \"id\": 180.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"After Sales Services\"\r\n            },\r\n            {\r\n                \"id\": 178.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Busniss & SME\"\r\n            },\r\n            {\r\n                \"id\": 176.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Devices Sales\"\r\n            },\r\n            {\r\n                \"id\": 179.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Payment\"\r\n            },\r\n            {\r\n                \"id\": 1609.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Refill\"\r\n            },\r\n            {\r\n                \"id\": 174.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Internet Sales\"\r\n            },\r\n            {\r\n                \"id\": 175.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Mobile Sales\"\r\n            },\r\n            {\r\n                \"id\": 177.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Orange Money\"\r\n            },\r\n            {\r\n                \"id\": 181.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Others\"\r\n            }\r\n        ],\r\n        \"1127.0\": [],\r\n        \"561.0\": [],\r\n        \"1144.0\": [\r\n            {\r\n                \"id\": 180.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"After Sales Services\"\r\n            },\r\n            {\r\n                \"id\": 178.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Busniss & SME\"\r\n            },\r\n            {\r\n                \"id\": 176.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Devices Sales\"\r\n            },\r\n            {\r\n                \"id\": 179.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Payment\"\r\n            },\r\n            {\r\n                \"id\": 1609.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Refill\"\r\n            },\r\n            {\r\n                \"id\": 174.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Internet Sales\"\r\n            },\r\n            {\r\n                \"id\": 175.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Mobile Sales\"\r\n            },\r\n            {\r\n                \"id\": 177.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Orange Money\"\r\n            },\r\n            {\r\n                \"id\": 181.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Others\"\r\n            }\r\n        ],\r\n        \"584.0\": [],\r\n        \"1174.0\": [],\r\n        \"592.0\": [\r\n            {\r\n                \"id\": 180.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"After Sales Services\"\r\n            },\r\n            {\r\n                \"id\": 178.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Busniss & SME\"\r\n            },\r\n            {\r\n                \"id\": 176.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Devices Sales\"\r\n            },\r\n            {\r\n                \"id\": 179.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Payment\"\r\n            },\r\n            {\r\n                \"id\": 174.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Internet Sales\"\r\n            },\r\n            {\r\n                \"id\": 175.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Mobile Sales\"\r\n            },\r\n            {\r\n                \"id\": 177.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Orange Money\"\r\n            },\r\n            {\r\n                \"id\": 181.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Others\"\r\n            }\r\n        ],\r\n        \"1211.0\": [],\r\n        \"303.0\": [],\r\n        \"1216.0\": [],\r\n        \"1246.0\": [\r\n            {\r\n                \"id\": 180.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"After Sales Services\"\r\n            },\r\n            {\r\n                \"id\": 178.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Busniss & SME\"\r\n            },\r\n            {\r\n                \"id\": 176.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Devices Sales\"\r\n            },\r\n            {\r\n                \"id\": 179.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Payment\"\r\n            },\r\n            {\r\n                \"id\": 174.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Internet Sales\"\r\n            },\r\n            {\r\n                \"id\": 175.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Mobile Sales\"\r\n            },\r\n            {\r\n                \"id\": 177.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Orange Money\"\r\n            },\r\n            {\r\n                \"id\": 181.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Others\"\r\n            }\r\n        ],\r\n        \"315.0\": [],\r\n        \"1262.0\": [\r\n            {\r\n                \"id\": 180.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"After Sales Services\"\r\n            },\r\n            {\r\n                \"id\": 178.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Busniss & SME\"\r\n            },\r\n            {\r\n                \"id\": 176.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Devices Sales\"\r\n            },\r\n            {\r\n                \"id\": 179.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Payment\"\r\n            },\r\n            {\r\n                \"id\": 1609.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Refill\"\r\n            },\r\n            {\r\n                \"id\": 174.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Internet Sales\"\r\n            },\r\n            {\r\n                \"id\": 175.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Mobile Sales\"\r\n            },\r\n            {\r\n                \"id\": 177.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Orange Money\"\r\n            },\r\n            {\r\n                \"id\": 181.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Others\"\r\n            }\r\n        ],\r\n        \"634.0\": [],\r\n        \"1291.0\": [\r\n            {\r\n                \"id\": 180.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"After Sales Services\"\r\n            },\r\n            {\r\n                \"id\": 178.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Busniss & SME\"\r\n            },\r\n            {\r\n                \"id\": 176.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Devices Sales\"\r\n            },\r\n            {\r\n                \"id\": 179.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Payment\"\r\n            },\r\n            {\r\n                \"id\": 1609.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Refill\"\r\n            },\r\n            {\r\n                \"id\": 174.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Internet Sales\"\r\n            },\r\n            {\r\n                \"id\": 175.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Mobile Sales\"\r\n            },\r\n            {\r\n                \"id\": 177.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Orange Money\"\r\n            },\r\n            {\r\n                \"id\": 181.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Others\"\r\n            }\r\n        ],\r\n        \"658.0\": [],\r\n        \"1325.0\": [\r\n            {\r\n                \"id\": 180.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"After Sales Services\"\r\n            },\r\n            {\r\n                \"id\": 178.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Busniss & SME\"\r\n            },\r\n            {\r\n                \"id\": 176.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Devices Sales\"\r\n            },\r\n            {\r\n                \"id\": 179.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Payment\"\r\n            },\r\n            {\r\n                \"id\": 174.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Internet Sales\"\r\n            },\r\n            {\r\n                \"id\": 175.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Mobile Sales\"\r\n            },\r\n            {\r\n                \"id\": 177.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Orange Money\"\r\n            },\r\n            {\r\n                \"id\": 181.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Others\"\r\n            }\r\n        ],\r\n        \"1345.0\": [],\r\n        \"677.0\": [],\r\n        \"1365.0\": [\r\n            {\r\n                \"id\": 180.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"After Sales Services\"\r\n            },\r\n            {\r\n                \"id\": 178.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Busniss & SME\"\r\n            },\r\n            {\r\n                \"id\": 176.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Devices Sales\"\r\n            },\r\n            {\r\n                \"id\": 179.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Payment\"\r\n            },\r\n            {\r\n                \"id\": 1609.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Refill\"\r\n            },\r\n            {\r\n                \"id\": 174.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Internet Sales\"\r\n            },\r\n            {\r\n                \"id\": 175.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Mobile Sales\"\r\n            },\r\n            {\r\n                \"id\": 177.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Orange Money\"\r\n            },\r\n            {\r\n                \"id\": 181.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Others\"\r\n            }\r\n        ],\r\n        \"1398.0\": [],\r\n        \"702.0\": [],\r\n        \"1417.0\": [],\r\n        \"1429.0\": [],\r\n        \"1447.0\": [\r\n            {\r\n                \"id\": 180.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"After Sales Services\"\r\n            },\r\n            {\r\n                \"id\": 178.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Busniss & SME\"\r\n            },\r\n            {\r\n                \"id\": 176.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Devices Sales\"\r\n            },\r\n            {\r\n                \"id\": 179.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Payment\"\r\n            },\r\n            {\r\n                \"id\": 1609.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Refill\"\r\n            },\r\n            {\r\n                \"id\": 174.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Internet Sales\"\r\n            },\r\n            {\r\n                \"id\": 175.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Mobile Sales\"\r\n            },\r\n            {\r\n                \"id\": 177.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Orange Money\"\r\n            },\r\n            {\r\n                \"id\": 181.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Others\"\r\n            }\r\n        ],\r\n        \"724.0\": [],\r\n        \"363.0\": [\r\n            {\r\n                \"id\": 180.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"After Sales Services\"\r\n            },\r\n            {\r\n                \"id\": 178.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Busniss & SME\"\r\n            },\r\n            {\r\n                \"id\": 176.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Devices Sales\"\r\n            },\r\n            {\r\n                \"id\": 179.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Payment\"\r\n            },\r\n            {\r\n                \"id\": 174.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Internet Sales\"\r\n            },\r\n            {\r\n                \"id\": 175.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Mobile Sales\"\r\n            },\r\n            {\r\n                \"id\": 177.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Orange Money\"\r\n            },\r\n            {\r\n                \"id\": 181.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Others\"\r\n            }\r\n        ],\r\n        \"1485.0\": [\r\n            {\r\n                \"id\": 180.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"After Sales Services\"\r\n            },\r\n            {\r\n                \"id\": 178.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Busniss & SME\"\r\n            },\r\n            {\r\n                \"id\": 176.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Devices Sales\"\r\n            },\r\n            {\r\n                \"id\": 179.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Payment\"\r\n            },\r\n            {\r\n                \"id\": 1609.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Refill\"\r\n            },\r\n            {\r\n                \"id\": 174.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Internet Sales\"\r\n            },\r\n            {\r\n                \"id\": 175.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Mobile Sales\"\r\n            },\r\n            {\r\n                \"id\": 177.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Orange Money\"\r\n            },\r\n            {\r\n                \"id\": 181.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Others\"\r\n            }\r\n        ],\r\n        \"744.0\": [],\r\n        \"1504.0\": [\r\n            {\r\n                \"id\": 180.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"After Sales Services\"\r\n            },\r\n            {\r\n                \"id\": 178.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Busniss & SME\"\r\n            },\r\n            {\r\n                \"id\": 176.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Devices Sales\"\r\n            },\r\n            {\r\n                \"id\": 179.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Payment\"\r\n            },\r\n            {\r\n                \"id\": 174.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Internet Sales\"\r\n            },\r\n            {\r\n                \"id\": 175.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Mobile Sales\"\r\n            },\r\n            {\r\n                \"id\": 177.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Orange Money\"\r\n            },\r\n            {\r\n                \"id\": 181.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Others\"\r\n            }\r\n        ],\r\n        \"1509.0\": [],\r\n        \"758.0\": [\r\n            {\r\n                \"id\": 180.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"After Sales Services\"\r\n            },\r\n            {\r\n                \"id\": 178.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Busniss & SME\"\r\n            },\r\n            {\r\n                \"id\": 176.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Devices Sales\"\r\n            },\r\n            {\r\n                \"id\": 179.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Payment\"\r\n            },\r\n            {\r\n                \"id\": 174.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Internet Sales\"\r\n            },\r\n            {\r\n                \"id\": 175.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Mobile Sales\"\r\n            },\r\n            {\r\n                \"id\": 177.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Orange Money\"\r\n            },\r\n            {\r\n                \"id\": 181.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Others\"\r\n            }\r\n        ],\r\n        \"1525.0\": [\r\n            {\r\n                \"id\": 180.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"After Sales Services\"\r\n            },\r\n            {\r\n                \"id\": 178.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Busniss & SME\"\r\n            },\r\n            {\r\n                \"id\": 176.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Devices Sales\"\r\n            },\r\n            {\r\n                \"id\": 179.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Payment\"\r\n            },\r\n            {\r\n                \"id\": 174.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Internet Sales\"\r\n            },\r\n            {\r\n                \"id\": 175.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Mobile Sales\"\r\n            },\r\n            {\r\n                \"id\": 177.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Orange Money\"\r\n            },\r\n            {\r\n                \"id\": 181.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Others\"\r\n            }\r\n        ],\r\n        \"387.0\": [],\r\n        \"785.0\": [],\r\n        \"1583.0\": [\r\n            {\r\n                \"id\": 179.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": false,\r\n                \"availableforWalkin\": true,\r\n                \"name\": \"Direct Payment\"\r\n            },\r\n            {\r\n                \"id\": 1609.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": false,\r\n                \"availableforWalkin\": true,\r\n                \"name\": \"Direct Refill\"\r\n            },\r\n            {\r\n                \"id\": 174.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": false,\r\n                \"availableforWalkin\": true,\r\n                \"name\": \"Internet Sales\"\r\n            },\r\n            {\r\n                \"id\": 175.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": false,\r\n                \"availableforWalkin\": true,\r\n                \"name\": \"Mobile Sales\"\r\n            },\r\n            {\r\n                \"id\": 177.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": false,\r\n                \"availableforWalkin\": true,\r\n                \"name\": \"Orange Money\"\r\n            },\r\n            {\r\n                \"id\": 181.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": false,\r\n                \"availableforWalkin\": true,\r\n                \"name\": \"Others\"\r\n            }\r\n        ],\r\n        \"797.0\": [],\r\n        \"201.0\": [],\r\n        \"1629.0\": [],\r\n        \"407.0\": [],\r\n        \"834.0\": [],\r\n        \"425.0\": [\r\n            {\r\n                \"id\": 180.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"After Sales Services\"\r\n            },\r\n            {\r\n                \"id\": 178.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Busniss & SME\"\r\n            },\r\n            {\r\n                \"id\": 176.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Devices Sales\"\r\n            },\r\n            {\r\n                \"id\": 179.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Payment\"\r\n            },\r\n            {\r\n                \"id\": 1609.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Direct Refill\"\r\n            },\r\n            {\r\n                \"id\": 174.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Internet Sales\"\r\n            },\r\n            {\r\n                \"id\": 175.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Mobile Sales\"\r\n            },\r\n            {\r\n                \"id\": 177.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Orange Money\"\r\n            },\r\n            {\r\n                \"id\": 181.0,\r\n                \"serviceGroupID\": 0.0,\r\n                \"departmentID\": 1.0,\r\n                \"availableForAppointment\": true,\r\n                \"availableforWalkin\": false,\r\n                \"name\": \"Others\"\r\n            }\r\n        ],\r\n        \"445.0\": [],\r\n        \"888.0\": [],\r\n        \"906.0\": [],\r\n        \"915.0\": [],\r\n        \"229.0\": [],\r\n        \"466.0\": [],\r\n        \"477.0\": [],\r\n        \"953.0\": [],\r\n        \"958.0\": [],\r\n        \"239.0\": [],\r\n        \"982.0\": [],\r\n        \"1005.0\": []\r\n    }\r\n}";
                //branchDetail = BranchDetail.FromJson(detail);
            }
            catch (Exception ex)
            {
                _logger.Error("GetBranchDetail error", ex);
            }
            return branchDetail;
        }

        public ServicesMap GetServicesByBranchId(string branchid, string language)
        {
            var service = new ServicesMap();
            var branchDetail = GetBranchDetail(language);
            var services = branchDetail.ServicesMap.Where(p => p.Key == branchid.ToString()).FirstOrDefault();

            if (services.Value != null && services.Value.Count > 0)
                service = services.Value.FirstOrDefault();

            return service;
        }

        public AvailableDaysToTakeAppointment GetAvailableDaysToTakeAppointment(string branchid, string serviceId, string language)
        {
            var appointmentDays = new AvailableDaysToTakeAppointment();

            try
            {
                //var client = new RestClient("http://10.1.167.110:8484/customerVisit/v1/getAvailableDaysToTakeAppointment?BranchID=1365.0&ServiceID=178.0&language=EN");
                var client = new RestClient($"{_appointmentBookingSettings.APIUrl}/getAvailableDaysToTakeAppointment?BranchID={branchid}&ServiceID={serviceId}&language={language}");
                client.Timeout = -1;
                var request = new RestRequest(Method.GET);
                IRestResponse response = client.Execute(request);

                if (response.IsSuccessful)
                {
                    appointmentDays = AvailableDaysToTakeAppointment.FromJson(response.Content);
                }

                //var str = "{\"getAvailableDaysToTakeAppointmentResult\":{\"description\":\"Success\",\"code\":0},\"validAppointmentDays\":[\"09/11/2020\",\"10/11/2020\",\"11/11/2020\",\"12/11/2020\",\"13/11/2020\",\"14/11/2020\",\"15/11/2020\",\"16/11/2020\",\"17/11/2020\",\"18/11/2020\",\"19/11/2020\",\"20/11/2020\",\"21/11/2020\",\"22/11/2020\",\"23/11/2020\",\"24/11/2020\",\"25/11/2020\",\"26/11/2020\",\"27/11/2020\",\"28/11/2020\",\"29/11/2020\",\"30/11/2020\",\"01/12/2020\",\"02/12/2020\",\"03/12/2020\",\"04/12/2020\",\"05/12/2020\",\"06/12/2020\",\"07/12/2020\",\"08/12/2020\"]}";
                //appointmentDays = AvailableDaysToTakeAppointment.FromJson(str);
            }
            catch (Exception ex)
            {
                _logger.Error("GetAvailableDaysToTakeAppointment error", ex);
            }
            return appointmentDays;
        }

        public AvailableTimesToTakeAppointment GetDayAvailableTimesToTakeAppointment(string appointmentDay, string branchId, string serviceId)
        {
            var appointmentTimes = new AvailableTimesToTakeAppointment();

            try
            {
                //var client = new RestClient("http://10.1.167.110:8484/customerVisit/v1//getDayAvailableTimesToTakeAppointment?AppointmentDay=09/11/2020&BranchID=1365.0&ServiceID=180.0");
                var client = new RestClient($"{_appointmentBookingSettings.APIUrl}/getDayAvailableTimesToTakeAppointment?AppointmentDay={appointmentDay}&BranchID={branchId}&ServiceID={serviceId}");
                client.Timeout = -1;
                var request = new RestRequest(Method.GET);
                IRestResponse response = client.Execute(request);

                if (response.IsSuccessful)
                {
                    appointmentTimes = AvailableTimesToTakeAppointment.FromJson(response.Content);
                }

                //var str = "{\"getDayAvailableTimesToTakeAppointmentResult\":{\"description\":\"Success\",\"code\":0},\"validDayAppointmentTimes\":[\"09:00\",\"09:05\",\"09:10\",\"09:15\",\"09:20\",\"09:25\",\"09:30\",\"09:35\",\"09:40\",\"09:45\",\"09:50\",\"09:55\",\"10:00\",\"10:05\",\"10:10\",\"10:15\",\"10:20\",\"10:25\",\"10:30\",\"10:35\",\"10:40\",\"10:45\",\"10:50\",\"10:55\",\"11:00\",\"11:05\",\"11:10\",\"11:15\",\"11:20\",\"11:25\",\"11:30\",\"11:35\",\"11:40\",\"11:45\",\"11:50\",\"11:55\",\"12:00\",\"12:05\",\"12:10\",\"12:15\",\"12:20\",\"12:25\",\"12:30\",\"12:35\",\"12:40\",\"12:45\",\"12:50\",\"12:55\",\"13:00\",\"13:05\",\"13:10\",\"13:15\",\"13:20\",\"13:25\",\"13:30\",\"13:35\",\"13:40\",\"13:45\",\"13:50\",\"13:55\",\"14:00\",\"14:05\",\"14:10\",\"14:15\",\"14:20\",\"14:25\",\"14:30\",\"14:35\",\"14:40\",\"14:45\",\"14:50\",\"14:55\",\"15:00\",\"15:05\",\"15:10\",\"15:15\",\"15:20\",\"15:25\",\"15:30\",\"15:35\",\"15:40\",\"15:45\",\"15:50\",\"15:55\",\"16:00\",\"16:05\",\"16:10\",\"16:15\",\"16:20\",\"16:25\",\"16:30\",\"16:35\",\"16:40\",\"16:45\",\"16:50\",\"16:55\",\"17:00\",\"17:05\",\"17:10\",\"17:15\",\"17:20\",\"17:25\",\"17:30\",\"17:35\",\"17:40\",\"17:45\",\"17:50\",\"17:55\",\"18:00\",\"18:05\",\"18:10\",\"18:15\",\"18:20\",\"18:25\",\"18:30\",\"18:35\",\"18:40\",\"18:45\",\"18:50\",\"18:55\",\"19:00\",\"19:05\",\"19:10\",\"19:15\",\"19:20\",\"19:25\",\"19:30\",\"19:35\",\"19:40\",\"19:45\",\"19:50\",\"19:55\"]}";
                //appointmentTimes = AvailableTimesToTakeAppointment.FromJson(str);
            }
            catch (Exception ex)
            {
                _logger.Error("GetDayAvailableTimesToTakeAppointment error", ex);
            }
            return appointmentTimes;
        }

        public BookAppointmentResponse BookAppointment(BookAppointmentRequest bookAppointmentRequest, string language)
        {
            var appointment = new BookAppointmentResponse();

            try
            {

                //var client = new RestClient("http://10.1.167.110:8484/customerVisit/v1/takeAppointments?AppointmentDay=12/11/2020&AppointmentTime=09:00&BranchID=1365.0&ServiceID=180.0&language=en&x_wassup_msisdn=0770386635");
                var url = $"{_appointmentBookingSettings.APIUrl}/takeAppointments?AppointmentDay={bookAppointmentRequest.AppointmentDay}&AppointmentTime={bookAppointmentRequest.SelectedAppointmentTime}&BranchID={bookAppointmentRequest.BranchID}&ServiceID={bookAppointmentRequest.ServiceID}&language={language}";
                //_logger.InsertLog(Core.Domain.Logging.LogLevel.Information, "request-"+ bookAppointmentRequest.x_wassup_msisdn, url);
                var client = new RestClient(url);
                client.Timeout = -1;
                var request = new RestRequest(Method.GET);
                request.AddHeader("x_wassup_msisdn", bookAppointmentRequest.x_wassup_msisdn);
                IRestResponse response = client.Execute(request);
                //_logger.InsertLog(Core.Domain.Logging.LogLevel.Information, "Book App Responce", response.Content);
                if (response.IsSuccessful)
                {
                    appointment = BookAppointmentResponse.FromJson(response.Content);
                }

                //var str = "{\"appointmentTicketInfo\":{\"appointmentDay\":\"12/11/2020\",\"appointmentTime\":\"11:50\",\"service\":{\"availableForAppointment\":true,\"availableforWalkin\":true,\"departmentID\":0,\"id\":1,\"name\":\"string\",\"serviceGroupID\":0},\"ticketNumber\":\"A123\"},\"takeAppointmentResult\":{\"code\":0,\"description\":\"\"}}";
                //appointment = BookAppointmentResponse.FromJson(str);
            }
            catch (Exception ex)
            {
                _logger.Error("BookAppointment error", ex);
            }
            return appointment;
        }

        #region Store Booked Appointment
        public void InsertBookedAppointment(BookedAppointment bookedAppointment)
        {
            if (bookedAppointment == null)
                throw new ArgumentNullException(nameof(bookedAppointment));

            _bookedAppointmentRepository.Insert(bookedAppointment);
        }

        public BookedAppointment GetBookedAppointmentByOrderId(int orderId)
        {
            var query = _bookedAppointmentRepository.Table;
            var appointment = query.Where(p => p.OrderId == orderId).LastOrDefault();

            return appointment;
        }

        public BookedAppointment UpdateOrderIdByBookedAppointmentId(int bookedAppointmentId, int orderId)
        {
            var query = _bookedAppointmentRepository.GetById(bookedAppointmentId);
            query.OrderId = orderId;
            _bookedAppointmentRepository.Update(query);

            return query;
        }

        #endregion

        #region AppointmentBranch

        /// <summary>
        /// Delete a appointment branch
        /// </summary>
        /// <param name="appointmentBranch">appointmentBranch</param>
        public virtual void DeleteAppointmentBranch(AppointmentBranch appointmentBranch)
        {
            if (appointmentBranch == null)
                throw new ArgumentNullException(nameof(appointmentBranch));

            _appointmentBranchRepository.Delete(appointmentBranch);

            //event notification
            _eventPublisher.EntityDeleted(appointmentBranch);
        }

        /// <summary>
        /// Inserts a AppointmentBranch
        /// </summary>
        /// <param name="AppointmentBranch">AppointmentBranch</param>
        public virtual void InsertAppointmentBranch(AppointmentBranch appointmentBranch)
        {
            if (appointmentBranch == null)
                throw new ArgumentNullException(nameof(appointmentBranch));

            _appointmentBranchRepository.Insert(appointmentBranch);

            //event notification
            _eventPublisher.EntityInserted(appointmentBranch);
        }

        /// <summary>
        /// Updates a AppointmentBranch
        /// </summary>
        /// <param name="AppointmentBranch">AppointmentBranch</param>
        public virtual void UpdateAppointmentBranch(AppointmentBranch appointmentBranch)
        {
            if (appointmentBranch == null)
                throw new ArgumentNullException(nameof(appointmentBranch));

            _appointmentBranchRepository.Update(appointmentBranch);

            //event notification
            _eventPublisher.EntityUpdated(appointmentBranch);
        }

        /// <summary>
        /// Gets a AppointmentBranch
        /// </summary>
        /// <param name="appointmentBranchId">appointmentBranch identifier</param>
        /// <returns>AppointmentBranch</returns>
        public virtual AppointmentBranch GetAppointmentBranchById(int appointmentBranchId)
        {
            if (appointmentBranchId == 0)
                return null;

            return _appointmentBranchRepository.GetById(appointmentBranchId);
        }

        /// <summary>
        /// Gets AppointmentBranch by the name
        /// </summary>
        /// <param name="appointmentBranchName">appointmentBranchName</param>
        public virtual IList<AppointmentBranch> GetAppointmentBranchByName(string appointmentBranchName)
        {
            var query = _appointmentBranchRepository.Table;
            if (!string.IsNullOrEmpty(appointmentBranchName))
            {
                //get AppointmentBranch with the passed name
                query = query.Where(appbranch => appbranch.Name.Contains(appointmentBranchName))
                    .OrderBy(appbranch => appbranch.Id);
            }
            return query.ToList();
        }

        public IList<AppointmentBranch> GetAppointmentBranchList()
        {
            return _appointmentBranchRepository.Table.ToList();
        }

        #endregion

        #region SendEmail
        /// <summary>
        /// Sends an Appointment booked notification to a customer
        /// </summary>
        /// <param name="BookedAppointment">BookedAppointment</param>
        /// <param name="languageId">Message language identifier</param>
        /// <returns>Queued email identifier</returns>
        public virtual IList<int> SendAppointmentBookedCustomerNotification(BookedAppointment bookedAppointment, int languageId)
        {
            if (bookedAppointment == null)
                throw new ArgumentNullException(nameof(bookedAppointment));

            var order = _orderService.GetOrderById(bookedAppointment.OrderId);

            if (order == null)
                throw new ArgumentNullException(nameof(order));

            var store = _storeService.GetStoreById(bookedAppointment.OrderId) ?? _storeContext.CurrentStore;
            languageId = EnsureLanguageIsActive(languageId, store.Id);

            var messageTemplates = GetActiveMessageTemplates("OrderPlaced.AppointmentBooked", store.Id);
            if (!messageTemplates.Any())
                return new List<int>();

            //tokens
            var commonTokens = new List<Token>();
            AddAppointTokens(commonTokens, bookedAppointment);
            
            return messageTemplates.Select(messageTemplate =>
            {
                //email account
                var emailAccount = GetEmailAccountOfMessageTemplate(messageTemplate, languageId);
                var tokens = new List<Token>(commonTokens);

                //event notification
                _eventPublisher.MessageTokensAdded(messageTemplate, tokens);

                var billingAddress = _addressService.GetAddressById(order.BillingAddressId);
                var toEmail = billingAddress.Email;
                var toName = $"{billingAddress.FirstName} {billingAddress.LastName}";

                return _workflowMessageService.SendNotification(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);
            }).ToList();
        }
        #endregion
    }
}
